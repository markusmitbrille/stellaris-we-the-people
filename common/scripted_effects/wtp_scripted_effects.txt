# this = planet
wtp_effect_grant_autonomy = {
	owner = {
		save_event_target_as = wtp_mother_country
	}
	# release rebel country
	wtp_effect_release = yes
	event_target:wtp_mother_country = {
		# nerf govenrment ethics
		add_modifier = {
			modifier = wtp_mod_granted_autonomy
			years = 10
		}
	}
	# setup rebel country
	event_target:wtp_last_rebel_country = {
		# make vassal
		set_subject_of = {
			who = event_target:wtp_mother_country
			subject_type = vassal
		}
		# boost government ethics
		add_modifier = {
			modifier = wtp_mod_recent_revolution
			years = 20
		}
		# give small defense fleet
		create_fleet_from_naval_cap = 0.4
		random_owned_planet = {
			last_created_fleet = {
				set_location = prev
			}
		}
	}
}

# this = planet
wtp_effect_start_war = {
	owner = {
		save_event_target_as = wtp_mother_country
	}
	# release rebel coutnry
	wtp_effect_release = yes
	event_target:wtp_mother_country = {
		# remove truce
		end_truce = event_target:wtp_last_rebel_country
		# boost govenrment ethics
		add_modifier = {
			modifier = wtp_mod_revolutionary_war
			years = 20
		}
	}
	event_target:wtp_last_rebel_country = {
		# save rebel alliance leader for later
		save_event_target_as = wtp_rebel_alliance_leader
		# remove truce
		end_truce = event_target:wtp_mother_country
		# boost govenrment ethics
		add_modifier = {
			modifier = wtp_mod_revolutionary_war
			years = 20
		}
		# give large rebel armada
		create_fleet_from_naval_cap = 0.4
		random_owned_planet = {
			last_created_fleet = {
				set_location = prev
			}
		}
		create_fleet_from_naval_cap = 0.4
		random_owned_planet = {
			last_created_fleet = {
				set_location = prev
			}
		}
	}
	# chain reaction
	if = {
		limit = {
			event_target:wtp_mother_country = {
				any_owned_planet = {
					wtp_trigger_has_unrest = yes
				}
			}
		}
		# boost rebel alliance leader
		event_target:wtp_rebel_alliance_leader = {
			# additional resources
			add_resource = {
				energy = 5000
				alloys = 700
				influence = 550
			}
		}
		# release others
		event_target:wtp_mother_country = {
			while = {
				count = 20
				limit = {
					any_owned_planet = {
						wtp_trigger_has_unrest = yes
					}
				}
				# release random rebel
				random_owned_planet = {
					limit = {
						wtp_trigger_has_unrest = yes
					}
					wtp_effect_release = yes
				}
				# remove truce
				end_truce = event_target:wtp_last_rebel_country
				# setup rebel country
				event_target:wtp_last_rebel_country = {
					# give sizable support fleet
					create_fleet_from_naval_cap = 0.2
					random_owned_planet = {
						last_created_fleet = {
							set_location = prev
						}
					}
					create_fleet_from_naval_cap = 0.2
					random_owned_planet = {
						last_created_fleet = {
							set_location = prev
						}
					}
					# remove truce
					end_truce = event_target:wtp_mother_country
					# boost govenrment ethics
					add_modifier = {
						modifier = wtp_mod_revolutionary_war
						years = 20
					}
					# join rebel alliance
					join_alliance = {
						who = event_target:wtp_rebel_alliance_leader
						override_requirements = yes
					}
					# fixes naming issues, maybe
					set_name = random
				}
			}
		}
		# setup rebel alliance
		event_target:wtp_rebel_alliance_leader = {
			# set leader
			set_federation_leader = event_target:wtp_rebel_alliance_leader
			# mutual opinion modifiers for all rebel alliance members
			federation = {
				every_member = {
					prev = {
						every_member = {
							limit = {
								NOT = {
									is_country = prevprev
								}
							}
							add_opinion_modifier = {
								who = prevprev
								modifier = wtp_opinion_fellow_revolutionary
							}
						}
					}
				}
			}
		}
	}
	event_target:wtp_mother_country = {
		# declare war
		declare_war = {
			target = event_target:wtp_rebel_alliance_leader
			attacker_war_goal = wtp_wg_revolutionary_war
		}
	}
}

@wtp_starting_minerals = 5000
@wtp_starting_energy = 10000
@wtp_starting_food = 1000
@wtp_starting_alloys = 300
@wtp_starting_influence = 200
# this = planet
wtp_effect_release = {
	# create rebel country
	switch = {
		trigger = has_modifier
		wtp_mod_unrest_spiritualist = {
			wtp_effect_create_rebel_country = {
				ethic = spiritualist
			}
		}
		wtp_mod_unrest_materialist = {
			wtp_effect_create_rebel_country = {
				ethic = materialist
			}
		}
		wtp_mod_unrest_militarist = {
			wtp_effect_create_rebel_country = {
				ethic = militarist
			}
		}
		wtp_mod_unrest_pacifist = {
			wtp_effect_create_rebel_country = {
				ethic = pacifist
			}
		}
		wtp_mod_unrest_xenophobe = {
			wtp_effect_create_rebel_country = {
				ethic = xenophobe
			}
		}
		wtp_mod_unrest_xenophile = {
			wtp_effect_create_rebel_country = {
				ethic = xenophile
			}
		}
		wtp_mod_unrest_egalitarian = {
			wtp_effect_create_rebel_country = {
				ethic = egalitarian
			}
		}
		wtp_mod_unrest_authoritarian = {
			wtp_effect_create_rebel_country = {
				ethic = authoritarian
			}
		}
		wtp_mod_unrest_race = {
			wtp_effect_create_rebel_country = {
				ethic = egalitarian
			}
			# remember that this is a melting pot for later
			event_target:wtp_last_rebel_country = {
				set_country_flag = wtp_country_flag_melting_pot
			}
		}
	}
	# setup rebel country
	event_target:wtp_last_rebel_country = {
		# silent comms
		establish_communications_no_message = event_target:wtp_mother_country
		# starting resources
		add_resource = {
			minerals = @wtp_starting_minerals
			energy = @wtp_starting_energy
			food = @wtp_starting_food
			alloys = @wtp_starting_alloys
			influence = @wtp_starting_influence
		}
		# starting leaders
		create_starting_leaders = yes
	}
	# transfer capital system
	solar_system = {
		wtp_effect_transfer_system_to_rebels = yes
	}
	# make capital
	set_capital = yes
	# flag core systems
	event_target:wtp_mother_country = {
		capital_scope = {
			solar_system = {
				set_star_flag = wtp_flag_core_sector
				every_neighbor_system = {
					limit = {
						exists = owner
						owner = {
							is_country = event_target:wtp_mother_country
						}
					}
					set_star_flag = wtp_flag_core_sector
					every_neighbor_system = {
						limit = {
							exists = owner
							owner = {
								is_country = event_target:wtp_mother_country
							}
						}
						set_star_flag = wtp_flag_core_sector
						every_neighbor_system = {
							limit = {
								exists = owner
								owner = {
									is_country = event_target:wtp_mother_country
								}
							}
							set_star_flag = wtp_flag_core_sector
							every_neighbor_system = {
								limit = {
									exists = owner
									owner = {
										is_country = event_target:wtp_mother_country
									}
								}
								set_star_flag = wtp_flag_core_sector
							}
						}
					}
				}
			}
		}
	}
	# transfer nearby, non-core systems
	event_target:wtp_last_rebel_country = {
		capital_scope = {
			solar_system = {
				every_neighbor_system = {
					limit = {
						wtp_trigger_system_is_rebellious = yes
					}
					wtp_effect_transfer_system_to_rebels = yes
					every_neighbor_system = {
						limit = {
							wtp_trigger_system_is_rebellious = yes
						}
						wtp_effect_transfer_system_to_rebels = yes
						every_neighbor_system = {
							limit = {
								wtp_trigger_system_is_rebellious = yes
							}
							wtp_effect_transfer_system_to_rebels = yes
						}
					}
				}
			}
		}
	}
	# remove core system flags
	event_target:wtp_mother_country = {
		every_system_within_border = {
			remove_star_flag = wtp_flag_core_sector
		}
	}
	# melting pot
	if = {
		limit = {
			event_target:wtp_last_rebel_country = {
				has_country_flag = wtp_country_flag_melting_pot
			}
		}
		# change primary species
		event_target:wtp_last_rebel_country = {
			random_owned_species = {
				limit = {
					NOT = {
						is_same_species = event_target:wtp_mother_country.owner_species
					}
				}
				event_target:wtp_last_rebel_country = {
					change_dominant_species = {
						species = prev
					}
				}
			}
		}
		# deport primary species of mother country
		event_target:wtp_mother_country = {
			owner_species = {
				set_population_controls = {
					country = event_target:wtp_last_rebel_country
					type = yes
					cooldown = yes
				}
				set_migration_controls = {
					country = event_target:wtp_last_rebel_country
					type = yes
					cooldown = yes
				}
				set_citizenship_type = {
					country = event_target:wtp_last_rebel_country
					type = citizenship_purge
					cooldown = yes
				}
				set_purge_type = {
					country = event_target:wtp_last_rebel_country
					type = purge_displacement
					cooldown = yes
				}
			}
		}
		# grant pops of all other species full citizenship
		event_target:wtp_last_rebel_country = {
			every_owned_species = {
				limit = {
					NOT = {
						is_same_species = event_target:wtp_mother_country.owner_species
					}
				}
				set_population_controls = {
					country = event_target:wtp_last_rebel_country
					type = no
					cooldown = yes
				}
				set_migration_controls = {
					country = event_target:wtp_last_rebel_country
					type = no
					cooldown = yes
				}
				set_citizenship_type = {
					country = event_target:wtp_last_rebel_country
					type = citizenship_full
					cooldown = yes
				}
			}
		}
		# shift ethos of all other species' pops toward egalitarian
		event_target:wtp_last_rebel_country = {
			every_owned_pop = {
				limit = {
					NOT = {
						is_same_species = event_target:wtp_mother_country.owner_species
					}
				}
				shift_ethic = ethic_egalitarian
			}
		}
	}
}

wtp_effect_create_rebel_country = {
	event_target:wtp_mother_country = {
		create_country = {
			type = default
			released_by_country = event_target:wtp_mother_country
			released_from_country = event_target:wtp_mother_country
			name_list = event_target:wtp_mother_country
			ship_prefix = event_target:wtp_mother_country
			species = event_target:wtp_mother_country
			origin = origin_separatists
			ethos = {
				ethic = ethic_fanatic_$ethic$
				ethic = random
			}
			ignore_initial_colony_error = yes
			day_zero_contact = no
			effect = {
				save_event_target_as = wtp_last_rebel_country
			}
		}
	}
	# remove broke away opinion
	event_target:wtp_last_rebel_country = {
		remove_opinion_modifier = {
			who = event_target:wtp_mother_country
			modifier = opinion_broke_away_from
		}
	}
	# remove liberation opinion
	event_target:wtp_mother_country = {
		remove_opinion_modifier = {
			who = event_target:wtp_last_rebel_country
			modifier = opinion_we_liberated
		}
	}
}

# this = system
wtp_effect_transfer_system_to_rebels = {
	starbase = {
		set_owner = event_target:wtp_last_rebel_country
	}
	every_system_planet = {
		limit = {
			exists = owner
			owner = {
				is_country = event_target:wtp_mother_country
			}
		}
		# transfer planet
		set_owner = event_target:wtp_last_rebel_country
		set_controller = event_target:wtp_last_rebel_country
		# reset unrest
		wtp_effect_remove_unrest = yes
		wtp_effect_remove_vanilla_unrest = yes
		set_variable = {
			which = wtp_var_unrest
			value = 0
		}
		# remove countermeasures
		remove_modifier = wtp_mod_propaganda
		remove_modifier = wtp_mod_crackdown
		# transfer armies
		every_planet_army = {
			limit = {
				owner = {
					is_country = event_target:wtp_mother_country
				}
			}
			set_owner = event_target:wtp_last_rebel_country
		}
	}
}

# this = planet
wtp_effect_start_unrest = {
	# remove other unrest modifiers first
	wtp_effect_remove_unrest = yes
	wtp_effect_remove_vanilla_unrest = yes
	# add semi-random unrest modifier
	random_list = {
		# traditionalist
		0 = {
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 1
					faction = traditionalist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 2
					faction = traditionalist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 3
					faction = traditionalist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 4
					faction = traditionalist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 5
					faction = traditionalist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 6
					faction = traditionalist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 7
					faction = traditionalist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 8
					faction = traditionalist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 9
					faction = traditionalist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 10
					faction = traditionalist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 11
					faction = traditionalist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 12
					faction = traditionalist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 13
					faction = traditionalist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 14
					faction = traditionalist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 15
					faction = traditionalist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 16
					faction = traditionalist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 17
					faction = traditionalist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 18
					faction = traditionalist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 19
					faction = traditionalist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 20
					faction = traditionalist
				}
			}
			modifier = {
				add = 5
				wtp_at_least_faction_pops = {
					count = 25
					faction = traditionalist
				}
			}
			modifier = {
				add = 5
				wtp_at_least_faction_pops = {
					count = 30
					faction = traditionalist
				}
			}
			modifier = {
				add = 5
				wtp_at_least_faction_pops = {
					count = 35
					faction = traditionalist
				}
			}
			modifier = {
				add = 5
				wtp_at_least_faction_pops = {
					count = 40
					faction = traditionalist
				}
			}
			modifier = {
				add = 5
				wtp_at_least_faction_pops = {
					count = 45
					faction = traditionalist
				}
			}
			modifier = {
				add = 5
				wtp_at_least_faction_pops = {
					count = 50
					faction = traditionalist
				}
			}
			modifier = {
				add = 10
				wtp_at_least_faction_pops = {
					count = 60
					faction = traditionalist
				}
			}
			modifier = {
				add = 10
				wtp_at_least_faction_pops = {
					count = 70
					faction = traditionalist
				}
			}
			modifier = {
				add = 10
				wtp_at_least_faction_pops = {
					count = 80
					faction = traditionalist
				}
			}
			modifier = {
				add = 10
				wtp_at_least_faction_pops = {
					count = 90
					faction = traditionalist
				}
			}
			modifier = {
				add = 10
				wtp_at_least_faction_pops = {
					count = 100
					faction = traditionalist
				}
			}
			modifier = {
				add = 25
				wtp_at_least_faction_pops = {
					count = 125
					faction = traditionalist
				}
			}
			modifier = {
				add = 25
				wtp_at_least_faction_pops = {
					count = 150
					faction = traditionalist
				}
			}
			modifier = {
				add = 25
				wtp_at_least_faction_pops = {
					count = 175
					faction = traditionalist
				}
			}
			modifier = {
				add = 25
				wtp_at_least_faction_pops = {
					count = 200
					faction = traditionalist
				}
			}
			modifier = {
				factor = 0
				owner = {
					is_spiritualist = yes
				}
			}
			add_modifier = {
				modifier = wtp_mod_unrest_spiritualist
				days = -1
			}
		}
		# technologist
		0 = {
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 1
					faction = technologist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 2
					faction = technologist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 3
					faction = technologist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 4
					faction = technologist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 5
					faction = technologist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 6
					faction = technologist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 7
					faction = technologist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 8
					faction = technologist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 9
					faction = technologist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 10
					faction = technologist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 11
					faction = technologist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 12
					faction = technologist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 13
					faction = technologist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 14
					faction = technologist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 15
					faction = technologist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 16
					faction = technologist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 17
					faction = technologist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 18
					faction = technologist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 19
					faction = technologist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 20
					faction = technologist
				}
			}
			modifier = {
				add = 5
				wtp_at_least_faction_pops = {
					count = 25
					faction = technologist
				}
			}
			modifier = {
				add = 5
				wtp_at_least_faction_pops = {
					count = 30
					faction = technologist
				}
			}
			modifier = {
				add = 5
				wtp_at_least_faction_pops = {
					count = 35
					faction = technologist
				}
			}
			modifier = {
				add = 5
				wtp_at_least_faction_pops = {
					count = 40
					faction = technologist
				}
			}
			modifier = {
				add = 5
				wtp_at_least_faction_pops = {
					count = 45
					faction = technologist
				}
			}
			modifier = {
				add = 5
				wtp_at_least_faction_pops = {
					count = 50
					faction = technologist
				}
			}
			modifier = {
				add = 10
				wtp_at_least_faction_pops = {
					count = 60
					faction = technologist
				}
			}
			modifier = {
				add = 10
				wtp_at_least_faction_pops = {
					count = 70
					faction = technologist
				}
			}
			modifier = {
				add = 10
				wtp_at_least_faction_pops = {
					count = 80
					faction = technologist
				}
			}
			modifier = {
				add = 10
				wtp_at_least_faction_pops = {
					count = 90
					faction = technologist
				}
			}
			modifier = {
				add = 10
				wtp_at_least_faction_pops = {
					count = 100
					faction = technologist
				}
			}
			modifier = {
				add = 25
				wtp_at_least_faction_pops = {
					count = 125
					faction = technologist
				}
			}
			modifier = {
				add = 25
				wtp_at_least_faction_pops = {
					count = 150
					faction = technologist
				}
			}
			modifier = {
				add = 25
				wtp_at_least_faction_pops = {
					count = 175
					faction = technologist
				}
			}
			modifier = {
				add = 25
				wtp_at_least_faction_pops = {
					count = 200
					faction = technologist
				}
			}
			modifier = {
				factor = 0
				owner = {
					is_materialist = yes
				}
			}
			add_modifier = {
				modifier = wtp_mod_unrest_materialist
				days = -1
			}
		}
		# imperialist
		0 = {
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 1
					faction = imperialist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 2
					faction = imperialist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 3
					faction = imperialist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 4
					faction = imperialist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 5
					faction = imperialist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 6
					faction = imperialist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 7
					faction = imperialist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 8
					faction = imperialist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 9
					faction = imperialist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 10
					faction = imperialist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 11
					faction = imperialist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 12
					faction = imperialist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 13
					faction = imperialist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 14
					faction = imperialist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 15
					faction = imperialist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 16
					faction = imperialist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 17
					faction = imperialist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 18
					faction = imperialist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 19
					faction = imperialist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 20
					faction = imperialist
				}
			}
			modifier = {
				add = 5
				wtp_at_least_faction_pops = {
					count = 25
					faction = imperialist
				}
			}
			modifier = {
				add = 5
				wtp_at_least_faction_pops = {
					count = 30
					faction = imperialist
				}
			}
			modifier = {
				add = 5
				wtp_at_least_faction_pops = {
					count = 35
					faction = imperialist
				}
			}
			modifier = {
				add = 5
				wtp_at_least_faction_pops = {
					count = 40
					faction = imperialist
				}
			}
			modifier = {
				add = 5
				wtp_at_least_faction_pops = {
					count = 45
					faction = imperialist
				}
			}
			modifier = {
				add = 5
				wtp_at_least_faction_pops = {
					count = 50
					faction = imperialist
				}
			}
			modifier = {
				add = 10
				wtp_at_least_faction_pops = {
					count = 60
					faction = imperialist
				}
			}
			modifier = {
				add = 10
				wtp_at_least_faction_pops = {
					count = 70
					faction = imperialist
				}
			}
			modifier = {
				add = 10
				wtp_at_least_faction_pops = {
					count = 80
					faction = imperialist
				}
			}
			modifier = {
				add = 10
				wtp_at_least_faction_pops = {
					count = 90
					faction = imperialist
				}
			}
			modifier = {
				add = 10
				wtp_at_least_faction_pops = {
					count = 100
					faction = imperialist
				}
			}
			modifier = {
				add = 25
				wtp_at_least_faction_pops = {
					count = 125
					faction = imperialist
				}
			}
			modifier = {
				add = 25
				wtp_at_least_faction_pops = {
					count = 150
					faction = imperialist
				}
			}
			modifier = {
				add = 25
				wtp_at_least_faction_pops = {
					count = 175
					faction = imperialist
				}
			}
			modifier = {
				add = 25
				wtp_at_least_faction_pops = {
					count = 200
					faction = imperialist
				}
			}
			modifier = {
				factor = 0
				owner = {
					is_militarist = yes
				}
			}
			add_modifier = {
				modifier = wtp_mod_unrest_militarist
				days = -1
			}
		}
		# prosperity
		0 = {
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 1
					faction = prosperity
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 2
					faction = prosperity
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 3
					faction = prosperity
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 4
					faction = prosperity
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 5
					faction = prosperity
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 6
					faction = prosperity
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 7
					faction = prosperity
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 8
					faction = prosperity
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 9
					faction = prosperity
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 10
					faction = prosperity
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 11
					faction = prosperity
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 12
					faction = prosperity
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 13
					faction = prosperity
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 14
					faction = prosperity
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 15
					faction = prosperity
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 16
					faction = prosperity
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 17
					faction = prosperity
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 18
					faction = prosperity
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 19
					faction = prosperity
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 20
					faction = prosperity
				}
			}
			modifier = {
				add = 5
				wtp_at_least_faction_pops = {
					count = 25
					faction = prosperity
				}
			}
			modifier = {
				add = 5
				wtp_at_least_faction_pops = {
					count = 30
					faction = prosperity
				}
			}
			modifier = {
				add = 5
				wtp_at_least_faction_pops = {
					count = 35
					faction = prosperity
				}
			}
			modifier = {
				add = 5
				wtp_at_least_faction_pops = {
					count = 40
					faction = prosperity
				}
			}
			modifier = {
				add = 5
				wtp_at_least_faction_pops = {
					count = 45
					faction = prosperity
				}
			}
			modifier = {
				add = 5
				wtp_at_least_faction_pops = {
					count = 50
					faction = prosperity
				}
			}
			modifier = {
				add = 10
				wtp_at_least_faction_pops = {
					count = 60
					faction = prosperity
				}
			}
			modifier = {
				add = 10
				wtp_at_least_faction_pops = {
					count = 70
					faction = prosperity
				}
			}
			modifier = {
				add = 10
				wtp_at_least_faction_pops = {
					count = 80
					faction = prosperity
				}
			}
			modifier = {
				add = 10
				wtp_at_least_faction_pops = {
					count = 90
					faction = prosperity
				}
			}
			modifier = {
				add = 10
				wtp_at_least_faction_pops = {
					count = 100
					faction = prosperity
				}
			}
			modifier = {
				add = 25
				wtp_at_least_faction_pops = {
					count = 125
					faction = prosperity
				}
			}
			modifier = {
				add = 25
				wtp_at_least_faction_pops = {
					count = 150
					faction = prosperity
				}
			}
			modifier = {
				add = 25
				wtp_at_least_faction_pops = {
					count = 175
					faction = prosperity
				}
			}
			modifier = {
				add = 25
				wtp_at_least_faction_pops = {
					count = 200
					faction = prosperity
				}
			}
			modifier = {
				factor = 0
				owner = {
					is_pacifist = yes
				}
			}
			add_modifier = {
				modifier = wtp_mod_unrest_pacifist
				days = -1
			}
		}
		# isolationist
		0 = {
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 1
					faction = isolationist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 2
					faction = isolationist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 3
					faction = isolationist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 4
					faction = isolationist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 5
					faction = isolationist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 6
					faction = isolationist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 7
					faction = isolationist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 8
					faction = isolationist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 9
					faction = isolationist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 10
					faction = isolationist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 11
					faction = isolationist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 12
					faction = isolationist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 13
					faction = isolationist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 14
					faction = isolationist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 15
					faction = isolationist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 16
					faction = isolationist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 17
					faction = isolationist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 18
					faction = isolationist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 19
					faction = isolationist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 20
					faction = isolationist
				}
			}
			modifier = {
				add = 5
				wtp_at_least_faction_pops = {
					count = 25
					faction = isolationist
				}
			}
			modifier = {
				add = 5
				wtp_at_least_faction_pops = {
					count = 30
					faction = isolationist
				}
			}
			modifier = {
				add = 5
				wtp_at_least_faction_pops = {
					count = 35
					faction = isolationist
				}
			}
			modifier = {
				add = 5
				wtp_at_least_faction_pops = {
					count = 40
					faction = isolationist
				}
			}
			modifier = {
				add = 5
				wtp_at_least_faction_pops = {
					count = 45
					faction = isolationist
				}
			}
			modifier = {
				add = 5
				wtp_at_least_faction_pops = {
					count = 50
					faction = isolationist
				}
			}
			modifier = {
				add = 10
				wtp_at_least_faction_pops = {
					count = 60
					faction = isolationist
				}
			}
			modifier = {
				add = 10
				wtp_at_least_faction_pops = {
					count = 70
					faction = isolationist
				}
			}
			modifier = {
				add = 10
				wtp_at_least_faction_pops = {
					count = 80
					faction = isolationist
				}
			}
			modifier = {
				add = 10
				wtp_at_least_faction_pops = {
					count = 90
					faction = isolationist
				}
			}
			modifier = {
				add = 10
				wtp_at_least_faction_pops = {
					count = 100
					faction = isolationist
				}
			}
			modifier = {
				add = 25
				wtp_at_least_faction_pops = {
					count = 125
					faction = isolationist
				}
			}
			modifier = {
				add = 25
				wtp_at_least_faction_pops = {
					count = 150
					faction = isolationist
				}
			}
			modifier = {
				add = 25
				wtp_at_least_faction_pops = {
					count = 175
					faction = isolationist
				}
			}
			modifier = {
				add = 25
				wtp_at_least_faction_pops = {
					count = 200
					faction = isolationist
				}
			}
			modifier = {
				factor = 0
				owner = {
					is_xenophobe = yes
				}
			}
			add_modifier = {
				modifier = wtp_mod_unrest_xenophobe
				days = -1
			}
		}
		# supremacist
		0 = {
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 1
					faction = supremacist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 2
					faction = supremacist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 3
					faction = supremacist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 4
					faction = supremacist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 5
					faction = supremacist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 6
					faction = supremacist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 7
					faction = supremacist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 8
					faction = supremacist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 9
					faction = supremacist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 10
					faction = supremacist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 11
					faction = supremacist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 12
					faction = supremacist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 13
					faction = supremacist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 14
					faction = supremacist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 15
					faction = supremacist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 16
					faction = supremacist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 17
					faction = supremacist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 18
					faction = supremacist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 19
					faction = supremacist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 20
					faction = supremacist
				}
			}
			modifier = {
				add = 5
				wtp_at_least_faction_pops = {
					count = 25
					faction = supremacist
				}
			}
			modifier = {
				add = 5
				wtp_at_least_faction_pops = {
					count = 30
					faction = supremacist
				}
			}
			modifier = {
				add = 5
				wtp_at_least_faction_pops = {
					count = 35
					faction = supremacist
				}
			}
			modifier = {
				add = 5
				wtp_at_least_faction_pops = {
					count = 40
					faction = supremacist
				}
			}
			modifier = {
				add = 5
				wtp_at_least_faction_pops = {
					count = 45
					faction = supremacist
				}
			}
			modifier = {
				add = 5
				wtp_at_least_faction_pops = {
					count = 50
					faction = supremacist
				}
			}
			modifier = {
				add = 10
				wtp_at_least_faction_pops = {
					count = 60
					faction = supremacist
				}
			}
			modifier = {
				add = 10
				wtp_at_least_faction_pops = {
					count = 70
					faction = supremacist
				}
			}
			modifier = {
				add = 10
				wtp_at_least_faction_pops = {
					count = 80
					faction = supremacist
				}
			}
			modifier = {
				add = 10
				wtp_at_least_faction_pops = {
					count = 90
					faction = supremacist
				}
			}
			modifier = {
				add = 10
				wtp_at_least_faction_pops = {
					count = 100
					faction = supremacist
				}
			}
			modifier = {
				add = 25
				wtp_at_least_faction_pops = {
					count = 125
					faction = supremacist
				}
			}
			modifier = {
				add = 25
				wtp_at_least_faction_pops = {
					count = 150
					faction = supremacist
				}
			}
			modifier = {
				add = 25
				wtp_at_least_faction_pops = {
					count = 175
					faction = supremacist
				}
			}
			modifier = {
				add = 25
				wtp_at_least_faction_pops = {
					count = 200
					faction = supremacist
				}
			}
			modifier = {
				factor = 0
				owner = {
					is_xenophobe = yes
				}
			}
			add_modifier = {
				modifier = wtp_mod_unrest_xenophobe
				days = -1
			}
		}
		# xenoist
		0 = {
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 1
					faction = xenoist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 2
					faction = xenoist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 3
					faction = xenoist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 4
					faction = xenoist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 5
					faction = xenoist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 6
					faction = xenoist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 7
					faction = xenoist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 8
					faction = xenoist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 9
					faction = xenoist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 10
					faction = xenoist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 11
					faction = xenoist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 12
					faction = xenoist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 13
					faction = xenoist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 14
					faction = xenoist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 15
					faction = xenoist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 16
					faction = xenoist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 17
					faction = xenoist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 18
					faction = xenoist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 19
					faction = xenoist
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 20
					faction = xenoist
				}
			}
			modifier = {
				add = 5
				wtp_at_least_faction_pops = {
					count = 25
					faction = xenoist
				}
			}
			modifier = {
				add = 5
				wtp_at_least_faction_pops = {
					count = 30
					faction = xenoist
				}
			}
			modifier = {
				add = 5
				wtp_at_least_faction_pops = {
					count = 35
					faction = xenoist
				}
			}
			modifier = {
				add = 5
				wtp_at_least_faction_pops = {
					count = 40
					faction = xenoist
				}
			}
			modifier = {
				add = 5
				wtp_at_least_faction_pops = {
					count = 45
					faction = xenoist
				}
			}
			modifier = {
				add = 5
				wtp_at_least_faction_pops = {
					count = 50
					faction = xenoist
				}
			}
			modifier = {
				add = 10
				wtp_at_least_faction_pops = {
					count = 60
					faction = xenoist
				}
			}
			modifier = {
				add = 10
				wtp_at_least_faction_pops = {
					count = 70
					faction = xenoist
				}
			}
			modifier = {
				add = 10
				wtp_at_least_faction_pops = {
					count = 80
					faction = xenoist
				}
			}
			modifier = {
				add = 10
				wtp_at_least_faction_pops = {
					count = 90
					faction = xenoist
				}
			}
			modifier = {
				add = 10
				wtp_at_least_faction_pops = {
					count = 100
					faction = xenoist
				}
			}
			modifier = {
				add = 25
				wtp_at_least_faction_pops = {
					count = 125
					faction = xenoist
				}
			}
			modifier = {
				add = 25
				wtp_at_least_faction_pops = {
					count = 150
					faction = xenoist
				}
			}
			modifier = {
				add = 25
				wtp_at_least_faction_pops = {
					count = 175
					faction = xenoist
				}
			}
			modifier = {
				add = 25
				wtp_at_least_faction_pops = {
					count = 200
					faction = xenoist
				}
			}
			modifier = {
				factor = 0
				owner = {
					is_xenophile = yes
				}
			}
			add_modifier = {
				modifier = wtp_mod_unrest_xenophile
				days = -1
			}
		}
		# progressive
		0 = {
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 1
					faction = progressive
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 2
					faction = progressive
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 3
					faction = progressive
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 4
					faction = progressive
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 5
					faction = progressive
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 6
					faction = progressive
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 7
					faction = progressive
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 8
					faction = progressive
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 9
					faction = progressive
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 10
					faction = progressive
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 11
					faction = progressive
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 12
					faction = progressive
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 13
					faction = progressive
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 14
					faction = progressive
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 15
					faction = progressive
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 16
					faction = progressive
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 17
					faction = progressive
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 18
					faction = progressive
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 19
					faction = progressive
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 20
					faction = progressive
				}
			}
			modifier = {
				add = 5
				wtp_at_least_faction_pops = {
					count = 25
					faction = progressive
				}
			}
			modifier = {
				add = 5
				wtp_at_least_faction_pops = {
					count = 30
					faction = progressive
				}
			}
			modifier = {
				add = 5
				wtp_at_least_faction_pops = {
					count = 35
					faction = progressive
				}
			}
			modifier = {
				add = 5
				wtp_at_least_faction_pops = {
					count = 40
					faction = progressive
				}
			}
			modifier = {
				add = 5
				wtp_at_least_faction_pops = {
					count = 45
					faction = progressive
				}
			}
			modifier = {
				add = 5
				wtp_at_least_faction_pops = {
					count = 50
					faction = progressive
				}
			}
			modifier = {
				add = 10
				wtp_at_least_faction_pops = {
					count = 60
					faction = progressive
				}
			}
			modifier = {
				add = 10
				wtp_at_least_faction_pops = {
					count = 70
					faction = progressive
				}
			}
			modifier = {
				add = 10
				wtp_at_least_faction_pops = {
					count = 80
					faction = progressive
				}
			}
			modifier = {
				add = 10
				wtp_at_least_faction_pops = {
					count = 90
					faction = progressive
				}
			}
			modifier = {
				add = 10
				wtp_at_least_faction_pops = {
					count = 100
					faction = progressive
				}
			}
			modifier = {
				add = 25
				wtp_at_least_faction_pops = {
					count = 125
					faction = progressive
				}
			}
			modifier = {
				add = 25
				wtp_at_least_faction_pops = {
					count = 150
					faction = progressive
				}
			}
			modifier = {
				add = 25
				wtp_at_least_faction_pops = {
					count = 175
					faction = progressive
				}
			}
			modifier = {
				add = 25
				wtp_at_least_faction_pops = {
					count = 200
					faction = progressive
				}
			}
			modifier = {
				factor = 0
				owner = {
					is_egalitarian = yes
				}
			}
			add_modifier = {
				modifier = wtp_mod_unrest_egalitarian
				days = -1
			}
		}
		# totalitarian
		0 = {
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 1
					faction = totalitarian
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 2
					faction = totalitarian
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 3
					faction = totalitarian
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 4
					faction = totalitarian
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 5
					faction = totalitarian
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 6
					faction = totalitarian
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 7
					faction = totalitarian
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 8
					faction = totalitarian
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 9
					faction = totalitarian
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 10
					faction = totalitarian
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 11
					faction = totalitarian
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 12
					faction = totalitarian
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 13
					faction = totalitarian
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 14
					faction = totalitarian
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 15
					faction = totalitarian
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 16
					faction = totalitarian
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 17
					faction = totalitarian
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 18
					faction = totalitarian
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 19
					faction = totalitarian
				}
			}
			modifier = {
				add = 1
				wtp_at_least_faction_pops = {
					count = 20
					faction = totalitarian
				}
			}
			modifier = {
				add = 5
				wtp_at_least_faction_pops = {
					count = 25
					faction = totalitarian
				}
			}
			modifier = {
				add = 5
				wtp_at_least_faction_pops = {
					count = 30
					faction = totalitarian
				}
			}
			modifier = {
				add = 5
				wtp_at_least_faction_pops = {
					count = 35
					faction = totalitarian
				}
			}
			modifier = {
				add = 5
				wtp_at_least_faction_pops = {
					count = 40
					faction = totalitarian
				}
			}
			modifier = {
				add = 5
				wtp_at_least_faction_pops = {
					count = 45
					faction = totalitarian
				}
			}
			modifier = {
				add = 5
				wtp_at_least_faction_pops = {
					count = 50
					faction = totalitarian
				}
			}
			modifier = {
				add = 10
				wtp_at_least_faction_pops = {
					count = 60
					faction = totalitarian
				}
			}
			modifier = {
				add = 10
				wtp_at_least_faction_pops = {
					count = 70
					faction = totalitarian
				}
			}
			modifier = {
				add = 10
				wtp_at_least_faction_pops = {
					count = 80
					faction = totalitarian
				}
			}
			modifier = {
				add = 10
				wtp_at_least_faction_pops = {
					count = 90
					faction = totalitarian
				}
			}
			modifier = {
				add = 10
				wtp_at_least_faction_pops = {
					count = 100
					faction = totalitarian
				}
			}
			modifier = {
				add = 25
				wtp_at_least_faction_pops = {
					count = 125
					faction = totalitarian
				}
			}
			modifier = {
				add = 25
				wtp_at_least_faction_pops = {
					count = 150
					faction = totalitarian
				}
			}
			modifier = {
				add = 25
				wtp_at_least_faction_pops = {
					count = 175
					faction = totalitarian
				}
			}
			modifier = {
				add = 25
				wtp_at_least_faction_pops = {
					count = 200
					faction = totalitarian
				}
			}
			modifier = {
				factor = 0
				owner = {
					is_authoritarian = yes
				}
			}
			add_modifier = {
				modifier = wtp_mod_unrest_authoritarian
				days = -1
			}
		}
		# non-citizens
		0 = {
			modifier = {
				add = 1
				wtp_at_least_non_citizen_pops = {
					count = 1
				}
			}
			modifier = {
				add = 1
				wtp_at_least_non_citizen_pops = {
					count = 2
				}
			}
			modifier = {
				add = 1
				wtp_at_least_non_citizen_pops = {
					count = 3
				}
			}
			modifier = {
				add = 1
				wtp_at_least_non_citizen_pops = {
					count = 4
				}
			}
			modifier = {
				add = 1
				wtp_at_least_non_citizen_pops = {
					count = 5
				}
			}
			modifier = {
				add = 1
				wtp_at_least_non_citizen_pops = {
					count = 6
				}
			}
			modifier = {
				add = 1
				wtp_at_least_non_citizen_pops = {
					count = 7
				}
			}
			modifier = {
				add = 1
				wtp_at_least_non_citizen_pops = {
					count = 8
				}
			}
			modifier = {
				add = 1
				wtp_at_least_non_citizen_pops = {
					count = 9
				}
			}
			modifier = {
				add = 1
				wtp_at_least_non_citizen_pops = {
					count = 10
				}
			}
			modifier = {
				add = 1
				wtp_at_least_non_citizen_pops = {
					count = 11
				}
			}
			modifier = {
				add = 1
				wtp_at_least_non_citizen_pops = {
					count = 12
				}
			}
			modifier = {
				add = 1
				wtp_at_least_non_citizen_pops = {
					count = 13
				}
			}
			modifier = {
				add = 1
				wtp_at_least_non_citizen_pops = {
					count = 14
				}
			}
			modifier = {
				add = 1
				wtp_at_least_non_citizen_pops = {
					count = 15
				}
			}
			modifier = {
				add = 1
				wtp_at_least_non_citizen_pops = {
					count = 16
				}
			}
			modifier = {
				add = 1
				wtp_at_least_non_citizen_pops = {
					count = 17
				}
			}
			modifier = {
				add = 1
				wtp_at_least_non_citizen_pops = {
					count = 18
				}
			}
			modifier = {
				add = 1
				wtp_at_least_non_citizen_pops = {
					count = 19
				}
			}
			modifier = {
				add = 1
				wtp_at_least_non_citizen_pops = {
					count = 20
				}
			}
			modifier = {
				add = 5
				wtp_at_least_non_citizen_pops = {
					count = 25
				}
			}
			modifier = {
				add = 5
				wtp_at_least_non_citizen_pops = {
					count = 30
				}
			}
			modifier = {
				add = 5
				wtp_at_least_non_citizen_pops = {
					count = 35
				}
			}
			modifier = {
				add = 5
				wtp_at_least_non_citizen_pops = {
					count = 40
				}
			}
			modifier = {
				add = 5
				wtp_at_least_non_citizen_pops = {
					count = 45
				}
			}
			modifier = {
				add = 5
				wtp_at_least_non_citizen_pops = {
					count = 50
				}
			}
			modifier = {
				add = 10
				wtp_at_least_non_citizen_pops = {
					count = 60
				}
			}
			modifier = {
				add = 10
				wtp_at_least_non_citizen_pops = {
					count = 70
				}
			}
			modifier = {
				add = 10
				wtp_at_least_non_citizen_pops = {
					count = 80
				}
			}
			modifier = {
				add = 10
				wtp_at_least_non_citizen_pops = {
					count = 90
				}
			}
			modifier = {
				add = 10
				wtp_at_least_non_citizen_pops = {
					count = 100
				}
			}
			modifier = {
				add = 25
				wtp_at_least_non_citizen_pops = {
					count = 125
				}
			}
			modifier = {
				add = 25
				wtp_at_least_non_citizen_pops = {
					count = 150
				}
			}
			modifier = {
				add = 25
				wtp_at_least_non_citizen_pops = {
					count = 175
				}
			}
			modifier = {
				add = 25
				wtp_at_least_non_citizen_pops = {
					count = 200
				}
			}
			add_modifier = {
				modifier = wtp_mod_unrest_race
				days = -1
			}
		}
	}
}

# this = planet
wtp_effect_remove_unrest = {
	remove_modifier = wtp_mod_unrest_spiritualist
	remove_modifier = wtp_mod_unrest_materialist
	remove_modifier = wtp_mod_unrest_militarist
	remove_modifier = wtp_mod_unrest_pacifist
	remove_modifier = wtp_mod_unrest_xenophobe
	remove_modifier = wtp_mod_unrest_xenophile
	remove_modifier = wtp_mod_unrest_egalitarian
	remove_modifier = wtp_mod_unrest_authoritarian
	remove_modifier = wtp_mod_unrest_race
}

# this = planet
wtp_effect_remove_vanilla_unrest = {
	remove_modifier = spiritualist_unrest
	remove_modifier = materialist_unrest
	remove_modifier = militarist_unrest
	remove_modifier = pacifist_unrest
	remove_modifier = xenophobe_unrest
	remove_modifier = xenophile_unrest
	remove_modifier = egalitarian_unrest
	remove_modifier = authoritarian_unrest
	remove_modifier = riots_averted
	remove_modifier = major_terrorist_action
	remove_modifier = minor_terrorist_action
}

# this = planet
wtp_effect_calculate_planet_trend = {
	set_variable = {
		which = wtp_var_trend
		value = 0
	}
	every_owned_pop = {
		limit = {
			is_being_purged = no
			is_being_assimilated = no
		}
		wtp_effect_calculate_pop_trend = yes
	}
}

# this = pop
wtp_effect_calculate_pop_trend = {
	# non-sapients, undesirables don't contribute unrest
	if = {
		limit = {
			OR = {
				is_sapient = no
				is_non_sapient_robot = yes
				is_being_purged = yes
				is_being_assimilated = yes
			}
		}
		set_variable = {
			which = wtp_var_trend
			value = 0
		}
		break = yes
	}
	# pop category forms base value
	switch = {
		trigger = is_pop_category
		slave = {
			set_variable = {
				which = wtp_var_trend
				value = 0.01
			}
		}
		worker = {
			set_variable = {
				which = wtp_var_trend
				value = 0.05
			}
		}
		specialist = {
			set_variable = {
				which = wtp_var_trend
				value = 0.1
			}
		}
		ruler = {
			set_variable = {
				which = wtp_var_trend
				value = 0.25
			}
		}
	}
	# positive happiness factor (unrest increase)
	if = {
		limit = {
			OR = {
				# non-citizens always contribute unrest
				NOT = {
					has_citizenship_rights = yes
				}
				# citizens contribute unrest based on party representation
				AND = {
					exists = pop_faction
					pop_faction = {
						NOT = {
							is_owner_ethic_pop_faction = yes
						}
					}
				}
			}
		}
		# happiness factor rounded to nearest 10
		switch = {
			trigger = happiness
			0.05 < {
				set_variable = {
					which = wtp_var_happiness
					value = 1
				}
			}
			0.15 < {
				set_variable = {
					which = wtp_var_happiness
					value = 0.9
				}
			}
			0.25 < {
				set_variable = {
					which = wtp_var_happiness
					value = 0.8
				}
			}
			0.35 < {
				set_variable = {
					which = wtp_var_happiness
					value = 0.7
				}
			}
			0.45 < {
				set_variable = {
					which = wtp_var_happiness
					value = 0.6
				}
			}
			0.55 < {
				set_variable = {
					which = wtp_var_happiness
					value = 0.5
				}
			}
			0.65 < {
				set_variable = {
					which = wtp_var_happiness
					value = 0.4
				}
			}
			0.75 < {
				set_variable = {
					which = wtp_var_happiness
					value = 0.3
				}
			}
			0.85 < {
				set_variable = {
					which = wtp_var_happiness
					value = 0.2
				}
			}
			0.95 < {
				set_variable = {
					which = wtp_var_happiness
					value = 0.1
				}
			}
			default = {
				set_variable = {
					which = wtp_var_happiness
					value = 0
				}
			}
		}
	}
	# negative happiness factor (unrest decrease)
	else = {
		# happiness factor rounded to nearest 10
		switch = {
			trigger = happiness
			0.05 < {
				set_variable = {
					which = wtp_var_happiness
					value = 0
				}
			}
			0.15 < {
				set_variable = {
					which = wtp_var_happiness
					value = -0.1
				}
			}
			0.25 < {
				set_variable = {
					which = wtp_var_happiness
					value = -0.2
				}
			}
			0.35 < {
				set_variable = {
					which = wtp_var_happiness
					value = -0.3
				}
			}
			0.45 < {
				set_variable = {
					which = wtp_var_happiness
					value = -0.4
				}
			}
			0.55 < {
				set_variable = {
					which = wtp_var_happiness
					value = -0.5
				}
			}
			0.65 < {
				set_variable = {
					which = wtp_var_happiness
					value = -0.6
				}
			}
			0.75 < {
				set_variable = {
					which = wtp_var_happiness
					value = -0.7
				}
			}
			0.85 < {
				set_variable = {
					which = wtp_var_happiness
					value = -0.8
				}
			}
			0.95 < {
				set_variable = {
					which = wtp_var_happiness
					value = -0.9
				}
			}
			default = {
				set_variable = {
					which = wtp_var_happiness
					value = -1
				}
			}
		}
	}
	# actual unrest change is determined by base trend times happiness factor
	multiply_variable = {
		which = wtp_var_trend
		value = wtp_var_happiness
	}
	# change planet trend by pop trend
	planet = {
		change_variable = {
			which = wtp_var_trend
			value = prev
		}
	}
}
